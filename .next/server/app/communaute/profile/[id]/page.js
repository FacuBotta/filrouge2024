(()=>{var e={};e.id=999,e.ids=[999],e.modules={96330:e=>{"use strict";e.exports=require("@prisma/client")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},79646:e=>{"use strict";e.exports=require("child_process")},55511:e=>{"use strict";e.exports=require("crypto")},14985:e=>{"use strict";e.exports=require("dns")},94735:e=>{"use strict";e.exports=require("events")},29021:e=>{"use strict";e.exports=require("fs")},81630:e=>{"use strict";e.exports=require("http")},55591:e=>{"use strict";e.exports=require("https")},91645:e=>{"use strict";e.exports=require("net")},21820:e=>{"use strict";e.exports=require("os")},33873:e=>{"use strict";e.exports=require("path")},27910:e=>{"use strict";e.exports=require("stream")},34631:e=>{"use strict";e.exports=require("tls")},79551:e=>{"use strict";e.exports=require("url")},28354:e=>{"use strict";e.exports=require("util")},74075:e=>{"use strict";e.exports=require("zlib")},4573:e=>{"use strict";e.exports=require("node:buffer")},77598:e=>{"use strict";e.exports=require("node:crypto")},57975:e=>{"use strict";e.exports=require("node:util")},52830:(e,r,t)=>{"use strict";t.r(r),t.d(r,{GlobalError:()=>n.a,__next_app__:()=>u,pages:()=>d,routeModule:()=>p,tree:()=>c});var s=t(70260),a=t(28203),i=t(25155),n=t.n(i),o=t(67292),l={};for(let e in o)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);t.d(r,l);let c=["",{children:["communaute",{children:["profile",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,97251)),"C:\\Users\\User\\Documents\\Hi world\\ADRAR 2024\\Fil Rouge\\app\\communaute\\profile\\[id]\\page.tsx"]}]},{}]},{}]},{}],auth:["__DEFAULT__",{},{defaultPage:[()=>Promise.resolve().then(t.bind(t,91985)),"C:\\Users\\User\\Documents\\Hi world\\ADRAR 2024\\Fil Rouge\\app\\@auth\\default.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,1033)),"C:\\Users\\User\\Documents\\Hi world\\ADRAR 2024\\Fil Rouge\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.bind(t,89977)),"C:\\Users\\User\\Documents\\Hi world\\ADRAR 2024\\Fil Rouge\\app\\not-found.tsx"],forbidden:[()=>Promise.resolve().then(t.t.bind(t,69116,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(t.t.bind(t,41485,23)),"next/dist/client/components/unauthorized-error"]}],d=["C:\\Users\\User\\Documents\\Hi world\\ADRAR 2024\\Fil Rouge\\app\\communaute\\profile\\[id]\\page.tsx"],u={require:t,loadChunk:()=>Promise.resolve()},p=new s.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/communaute/profile/[id]/page",pathname:"/communaute/profile/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},98144:(e,r,t)=>{"use strict";t.r(r),t.d(r,{"40a6fab70b313fd13f9ac52c0a962d6328c849a0f5":()=>a.A,"7fe13f6264349238c6e48141c1e4a57ee047053936":()=>s.Y});var s=t(53337),a=t(44328)},26831:(e,r,t)=>{"use strict";t.r(r),t.d(r,{"70dc9bf5e192ba2ebb97d79e848f22817060a11407":()=>o});var s=t(21590);t(70376);var a=t(33582),i=t(40492);let n=async({content:e,authorId:r,recipientId:t,score:s})=>{try{let a=await i.A.comments.create({data:{content:e,authorId:r,recipientId:t}}),n=await i.A.ratings.create({data:{userId:t,score:s,commentId:a.id}});return{comment:a,rating:n}}catch(e){return console.error("createCommentService error: ",e),null}};async function o(e,r,t){let s=await (0,a.j2)();if(!s)throw console.error("makeComment: no session found"),Error("no session found");try{return await n({content:e,authorId:s.user.id,recipientId:r,score:t}),{ok:!0,message:"Comment successfully created"}}catch(e){return console.error(e),{ok:!1,message:"Error creating the comment"}}}(0,t(99344).D)([o]),(0,s.A)(o,"70dc9bf5e192ba2ebb97d79e848f22817060a11407",null)},93376:(e,r,t)=>{Promise.resolve().then(t.bind(t,5627)),Promise.resolve().then(t.bind(t,9797)),Promise.resolve().then(t.bind(t,86382)),Promise.resolve().then(t.bind(t,32360))},80224:(e,r,t)=>{Promise.resolve().then(t.bind(t,85807)),Promise.resolve().then(t.bind(t,8089)),Promise.resolve().then(t.bind(t,99318)),Promise.resolve().then(t.bind(t,55852))},85807:(e,r,t)=>{"use strict";t.d(r,{default:()=>u});var s=t(45512),a=t(26248);let i=(0,a.createServerReference)("70dc9bf5e192ba2ebb97d79e848f22817060a11407",a.callServer,void 0,a.findSourceMapURL,"makeComment");var n=t(79334),o=t(58009),l=t(91542),c=t(35748);let d=(0,o.forwardRef)((e,r)=>{let[t,a]=(0,o.useState)(0),[i,n]=(0,o.useState)(0);return(0,o.useImperativeHandle)(r,()=>({getScore:()=>t})),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{children:"Donne une ponctuation !"}),(0,s.jsx)("div",{className:"flex gap-2 items-center my-2",children:[1,2,3,4,5].map(e=>(0,s.jsx)(c.In,{type:"star",filled:e<=i,onClick:()=>a(e),onMouseEnter:()=>n(e),onMouseLeave:()=>n(t),fillcolor:"#FCE181"},e))})]})});function u({recipientId:e}){let r=(0,o.useRef)(null),t=(0,o.useRef)(null),a=(0,n.useRouter)(),[c,u]=(0,o.useState)(!1),[p,m]=(0,o.useState)(!1),x=async s=>{s.preventDefault();let n=r.current?.value;try{if(n){u(!0);let s=t.current?.getScore();if(!s)throw Error("Score is not defined");let o=await i(n,e,s);o.ok?(l.o.success(o.message),r.current.value="",a.refresh()):l.o.error(o.message),u(!1)}}catch(e){console.error(e),l.o.error("Erreur lors de la cr\xe9ation du commentaire")}},f=()=>{r.current&&(r.current.value=""),m(!p)};return(0,s.jsxs)("div",{children:[(0,s.jsx)("button",{onClick:()=>m(!0),className:`${p?"hidden":"primary-btn mb-2"} `,children:"Laisser un commentaire"}),(0,s.jsxs)("form",{className:`${p?"h-[280px] opacity-100":"h-[0px] opacity-0"} overflow-hidden w-[300px] transition-all duration-300 ease-in-out`,onSubmit:e=>x(e),children:[(0,s.jsx)(d,{ref:t}),(0,s.jsx)("textarea",{ref:r,name:"comment",id:"comment",rows:4,placeholder:"Tapez un commentaire",className:"w-full p-2 border-2 border-black dark:border-dark-grey/50 rounded-lg dark:bg-transparent dark:placeholder:text-dark-greenLight/50"}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("button",{type:"submit",className:"primary-btn w-full",disabled:c,children:"Envoyer"}),(0,s.jsx)("div",{className:"secondary-btn",onClick:()=>f(),children:"Annuler"})]})]})]})}d.displayName="ScoreGiver"},55852:(e,r,t)=>{"use strict";t.r(r),t.d(r,{UserAvatar:()=>i});var s=t(45512),a=t(45103);let i=({className:e,src:r,onClick:t})=>{let i=r&&r.trim()?r:"/images/DefaultUserAvatar1.png";return(0,s.jsx)("div",{className:`${e||"size-12"} ${t?"cursor-pointer":""} relative overflow-hidden rounded-full`,onClick:t,"aria-label":"User avatar",children:(0,s.jsx)(a.default,{width:350,height:350,src:i,className:"rounded-full border border-card object-cover overflow-hidden",alt:"user avatar"})})}},44328:(e,r,t)=>{"use strict";t.d(r,{A:()=>n});var s=t(88977);t(98063);var a=t(2121),i=t(11527);async function n(e){try{let r=await (0,a.Vg)({id:e});if(!r)return null;return(0,i.M)(r)}catch(e){return console.error(e),null}}(0,t(56215).D)([n]),(0,s.A)(n,"40a6fab70b313fd13f9ac52c0a962d6328c849a0f5",null)},97251:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>m});var s=t(62740),a=t(44328),i=t(5627),n=t(23088);let o=e=>new Date(e).toLocaleDateString("fr",{weekday:"short",month:"short",day:"numeric",hour:"numeric"});var l=t(86382),c=t(9797);function d({event:e}){return(0,s.jsxs)(l.Link,{href:`/events/event/${e.id}`,className:"w-[300px] sm:w-[250px] flex border border-card rounded-lg p-5 gap-2 flex-col justify-between overflow-hidden shadow-xl bg-card hover:opacity-80",children:[(0,s.jsxs)("div",{className:"flex flex-col gap-2 text-left border-b border-light-borderCards dark:border-dark-borderCards pb-5",children:[(0,s.jsx)("h3",{className:"text-2xl font-bold",children:e.title}),(0,s.jsx)("span",{className:"font-thin text-lg",children:e.category?.title}),(0,s.jsx)("p",{className:"mt-4 dark:text-gray-300 break-words line-clamp-3",children:e.description})]}),(0,s.jsx)("div",{className:"flex  justify-between ",children:(0,s.jsxs)("div",{className:"flex flex-col items-start gap-2",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(c.default,{type:"calendar"}),(0,s.jsxs)("div",{className:"text-balance",children:[(0,s.jsx)("p",{children:o(e.eventStart)}),e.eventEnd&&(0,s.jsx)("p",{children:o(e.eventEnd)})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(c.default,{type:"user"}),e.participants&&e.participants.length>0?(0,s.jsxs)("p",{children:[e.participants.length," ",e.participants.length>1?"participants":"participant"]}):(0,s.jsx)("p",{children:"Aucun participant"})]})]})})]},e.id)}var u=t(42715),p=t(32360);async function m({params:e}){let{id:r}=await e,t=await (0,a.A)(r);if(!t)return(0,s.jsx)("div",{children:"User not found"});let{description:o,username:l,image:c,comments:m,eventsCreated:x,score:f}=t;return(0,s.jsxs)("main",{className:"w-[95%] max-w-[1000px] mx-auto min-h-screen my-10 ",children:[(0,s.jsxs)("header",{className:"flex justify-around items-start flex-wrap gap-5 p-10 border-2 divide-y-2 sm:divide-none rounded-lg overflow-hidden border-card bg-card",children:[(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center",children:[(0,s.jsx)(p.UserAvatar,{src:c,className:"size-48"}),(0,s.jsx)("h1",{className:"text-3xl font-bold my-5",children:l}),(0,s.jsx)(u.A,{ranting:f})]}),(0,s.jsxs)("div",{className:"flex flex-col items-start justify-start gap-5",children:[(0,s.jsx)("h2",{className:"text-3xl font-semibold mt-5",children:"A propos de moi"}),(0,s.jsx)("p",{className:"max-w-[400px]",children:o}),(0,s.jsx)("button",{className:"primary-btn",children:"Contacter"})]})]}),(0,s.jsxs)("section",{className:"flex flex-wrap my-10 gap-5 w-full",children:[(0,s.jsxs)("div",{className:"flex flex-col gap-5 sm:w-[550px]",children:[x?.length===0?(0,s.jsx)("h3",{className:"text-2xl font-bold",children:"Je n'ai pas encore cr\xe9\xe9 d'\xe9v\xe9nements \uD83D\uDE11"}):(0,s.jsx)("h3",{className:"text-3xl font-bold",children:"Mes \xe9v\xe9nements"}),(0,s.jsx)("div",{className:"flex flex-wrap gap-5 ",children:x.map(e=>(0,s.jsx)(d,{event:e},e.id))})]}),(0,s.jsxs)("div",{className:"flex flex-col  min-w-[300px] gap-5 items-start justify-start text-start",children:[(0,s.jsxs)("div",{className:"w-full flex flex-col ",children:[(0,s.jsx)("h2",{className:"mb-2 text-3xl font-semibold ",children:"Mes avis"}),(0,s.jsx)(i.default,{recipientId:r})]}),m?.length>0&&m?.map(e=>s.jsx(n.A,{comment:e},e.id))]})]})]})}},5627:(e,r,t)=>{"use strict";t.d(r,{default:()=>s});let s=(0,t(46760).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\Users\\\\User\\\\Documents\\\\Hi world\\\\ADRAR 2024\\\\Fil Rouge\\\\components\\\\forms\\\\makeCommentForm.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\User\\Documents\\Hi world\\ADRAR 2024\\Fil Rouge\\components\\forms\\makeCommentForm.tsx","default")},42715:(e,r,t)=>{"use strict";t.d(r,{A:()=>i});var s=t(62740);t(76301);var a=t(9797);function i({ranting:e,starWidth:r}){let t=Array.from({length:e},(e,t)=>(0,s.jsx)(a.default,{type:"star",cursor:"default",strokeWidth:1,width:r||25,color:"black",className:" fill-light-yellow"},t)),i=0;for(;i<5-e;)t.push((0,s.jsx)(a.default,{type:"star",cursor:"default",strokeWidth:1,color:"black",width:r||25,className:" dark:fill-light-grey/50"},i+10)),i++;return(0,s.jsx)("div",{className:"flex flex-col justify-center items-center w-fit",children:(0,s.jsx)("div",{className:"flex gap-1 items-center",children:t})})}},23088:(e,r,t)=>{"use strict";t.d(r,{A:()=>o});var s=t(62740),a=t(32360),i=t(86382),n=t(42715);function o({comment:e}){return(0,s.jsxs)("div",{className:"flex flex-col gap-2 p-1 border-2 border-card rounded-lg w-full max-w-[280px]",children:[(0,s.jsxs)("div",{className:"flex items-center gap-5 p-2  border-b w-full",children:[(0,s.jsx)(i.Link,{href:`/communaute/profile/${e.author.id}`,children:(0,s.jsx)(a.UserAvatar,{src:e.author.image,className:"size-12"})}),(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsx)("p",{className:"text-lg font-semibold",children:e.author.username}),(0,s.jsx)("p",{className:"text-sm font-thin",children:e.createdAt.toLocaleDateString()})]})]}),(0,s.jsxs)("div",{className:"text-lg pl-2",children:[(0,s.jsx)(n.A,{starWidth:15,ranting:e.rating?.score||0}),(0,s.jsx)("p",{children:e.content})]})]},e.id)}},33582:(e,r,t)=>{"use strict";t.d(r,{j2:()=>p,Jv:()=>m,CI:()=>x});var s=t(37067),a=t(96330),i=t(27261),n=t(73993),o=t(61088),l=t(7956),c=t(30342);let d=new a.PrismaClient,{handlers:u,auth:p,signIn:m,signOut:x}=(0,i.Ay)({trustHost:!0,adapter:(0,s.y)(d),secret:process.env.AUTH_SECRET,session:{strategy:"jwt",maxAge:604800,updateAge:604800},pages:{signIn:"/login",error:"/login/error"},callbacks:{jwt:async({token:e,trigger:r,session:t,user:s})=>(s&&(e.id=s.id,e.role=s.role,e.hasPassword=s.hasPassword),"update"===r&&t?.hasPassword!==void 0&&(e.hasPassword=t.hasPassword),e),session:async({session:e,token:r})=>({...e,user:{id:r.id,role:r.role,email:r.email,hasPassword:r.hasPassword}})},providers:[(0,o.A)({clientId:process.env.AUTH_GOOGLE_ID,clientSecret:process.env.AUTH_GOOGLE_SECRET,allowDangerousEmailAccountLinking:!0,authorization:{params:{prompt:"consent",access_type:"offline",response_type:"code"}}}),(0,l.A)({server:{host:process.env.EMAIL_SERVER_HOST,port:parseInt(process.env.EMAIL_SERVER_PORT,10),auth:{user:process.env.EMAIL_SERVER_USER,pass:process.env.EMAIL_SERVER_PASSWORD}},from:process.env.EMAIL_FROM,sendVerificationRequest:async e=>{let{identifier:r,url:t,provider:s}=e,a=(0,c.oO)(s.server),i=await a.sendMail({to:r,from:s.from,subject:"Bienvenue sur EventHub !",text:function({url:e}){return`Bienvenue sur EventHub !
Nous sommes ravis de vous accueillir. Pour continuer, cliquez sur le lien suivant pour vous connecter:
${e}

Si vous n'avez pas demand\xe9 cette connexion, vous pouvez ignorer cet email.
`}({url:t}),html:function(e){let{url:r}=e,t="#444";return`
<body style="background: #f9f9f9;">
  <table width="100%" border="0" cellspacing="20" cellpadding="0"
    style="background: #fff; max-width: 600px; margin: auto; border-radius: 10px;">
    <tr>
      <td align="center"
        style="padding: 10px 0px; font-size: 22px; font-family: Helvetica, Arial, sans-serif; color: ${t};">
        Bienvenue sur <strong>EventHub</strong> !
      </td>
    </tr>
    <tr>
      <td align="center"
        style="padding: 5px 0px 20px 0px; font-size: 16px; font-family: Helvetica, Arial, sans-serif; color: ${t};">
        Nous sommes ravis de vous accueillir. Pour continuer, cliquez sur le bouton ci-dessous pour commencer \xe0 utiliser votre compte !.
      </td>
    </tr>
    <tr>
      <td align="center" style="padding: 20px 0;">
        <table border="0" cellspacing="0" cellpadding="0">
          <tr>
            <td align="center" style="border-radius: 5px;" bgcolor="#F3D250">
              <a href="${r}" target="_blank"
                style="font-size: 18px; font-family: Helvetica, Arial, sans-serif; color: black; text-decoration: none; border-radius: 5px; padding: 10px 20px; border: 1px solid black; display: inline-block; font-weight: bold;">
                Se connecter
              </a>
            </td>
          </tr>
        </table>
      </td>
    </tr>
    <tr>
      <td align="center"
        style="padding: 0px 0px 10px 0px; font-size: 16px; line-height: 22px; font-family: Helvetica, Arial, sans-serif; color: ${t};">
        Si vous n'avez pas demand\xe9 cette connexion, vous pouvez ignorer cet email.
      </td>
    </tr>
  </table>
</body>
`}({url:t})}),n=i.rejected.concat(i.pending).filter(Boolean);if(n.length)throw Error(`Email(s) (${n.join(", ")}) could not be sent`)}}),(0,n.A)({name:"Credentials",authorize:async e=>e?{id:e.id,role:e.role,hasPassword:"true"===e.hasPassword,email:e.email}:null})]})},40492:(e,r,t)=>{"use strict";t.d(r,{A:()=>a});var s=t(96330);let a=globalThis.prismaGlobal??new s.PrismaClient},11587:(e,r,t)=>{"use strict";t.d(r,{A:()=>a});var s=t(96330);let a=globalThis.prismaGlobal??new s.PrismaClient},32360:(e,r,t)=>{"use strict";t.r(r),t.d(r,{UserAvatar:()=>s});let s=(0,t(46760).registerClientReference)(function(){throw Error("Attempted to call UserAvatar() from the server but UserAvatar is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\User\\Documents\\Hi world\\ADRAR 2024\\Fil Rouge\\public\\images\\UserAvatar.tsx","UserAvatar")},2121:(e,r,t)=>{"use strict";t.d(r,{Vg:()=>i,ZR:()=>a});var s=t(11587);let a=async()=>{try{return await s.A.user.findMany({select:{id:!0,email:!0,username:!0,image:!0,description:!0,_count:{select:{Ratings:!0,EventsCreated:!0}}}})}catch(e){return console.error("selectAllUsersService",e),null}},i=async({id:e})=>{if(!e||"string"!=typeof e)return null;try{let r=await s.A.user.findUnique({where:{id:e},select:{id:!0,email:!0,username:!0,image:!0,description:!0,EventsCreated:{select:{id:!0,title:!0,description:!0,eventStart:!0,eventEnd:!0,isPublic:!0,image:!0,createdAt:!0,updatedAt:!0,formattedAddress:!0,conversation:{select:{id:!0}},participants:{select:{userId:!0}},category:{select:{id:!0,title:!0}},UserInvitations:!0,Tasks:!0},orderBy:{eventStart:"asc"}},EventsJoined:{select:{event:{select:{id:!0,title:!0,description:!0,user:{select:{id:!0,username:!0,image:!0}},eventStart:!0,eventEnd:!0,isPublic:!0,image:!0,createdAt:!0,updatedAt:!0,formattedAddress:!0,conversation:{select:{id:!0}},category:{select:{id:!0,title:!0}},_count:{select:{participants:!0}}}}}},Tasks:!0,CommentsReceived:{select:{id:!0,createdAt:!0,updatedAt:!0,content:!0,recipientId:!0,author:{select:{id:!0,username:!0,image:!0}},rating:{select:{score:!0}}}}}});if(!r)return null;return r}catch(e){return console.error("selectUserDataService",e),null}}},11527:(e,r,t)=>{"use strict";t.d(r,{M:()=>s});let s=e=>{let r=e.CommentsReceived.length,t=e.CommentsReceived.reduce((e,r)=>e+(r.rating?.score||0),0);return{id:e.id,email:e.email,username:e.username,image:e.image,description:e.description,eventsCreated:e.EventsCreated,eventsJoined:e.EventsJoined.map(({event:e})=>({...e,creator:e.user})),tasks:e.Tasks,comments:e.CommentsReceived,score:r>0?t/r:0}}}};var r=require("../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[87,895,671,103,899],()=>t(52830));module.exports=s})();