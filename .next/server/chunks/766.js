exports.id=766,exports.ids=[766],exports.modules={89953:(e,t,r)=>{Promise.resolve().then(r.bind(r,40962))},26401:(e,t,r)=>{Promise.resolve().then(r.bind(r,55822))},699:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var s=r(45512),a=r(55852),l=r(58009);function i({users:e,takeUsers:t,closeModal:r,preSelectedUsers:i}){let[n,o]=(0,l.useState)(i??[]),[c,d]=(0,l.useState)(e),u=t=>{d(e.filter(e=>e.username?.toLowerCase().includes(t.toLowerCase())))},m=e=>{o(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])};return(0,s.jsxs)("div",{className:"w-full max-w-[320px] 4xl:max-w-[420px] h-[85vh] max-h-[700px] flex flex-col justify-between gap-2 p-4 rounded-xl border bg-light-cards dark:bg-dark-bg mx-2 mt-2",children:[(0,s.jsxs)("header",{className:"w-full",children:[(0,s.jsx)("p",{className:"text-2xl font-semibold mb-3",children:"Mes contactes"}),(0,s.jsx)("input",{type:"search",onChange:e=>u(e.target.value),placeholder:"Rechercher...",className:"newEventInput !bg-light-grey dark:!bg-transparent"})]}),(0,s.jsxs)("ul",{className:"flex flex-col w-full h-full no-scrollbar overflow-y-scroll inset-shadow-lg border border-light-borderCards dark:border-dark-borderCards rounded-lg p-2 bg-light-ciel dark:bg-dark-bg ",children:[0===c.length&&(0,s.jsx)("p",{className:"text-center opacity-50",children:"Aucun utilisateur trouv\xe9"}),c.map(e=>(0,s.jsxs)("li",{className:`cursor-pointer flex gap-2 bg-light-blue dark:bg-dark-cards items-end my-2 border-2 rounded-lg p-2 ${n.includes(e.id)?"border-light-yellow":"border-inherit"}`,onClick:()=>m(e.id),children:[(0,s.jsx)("div",{className:"shrink-1",children:(0,s.jsx)(a.UserAvatar,{src:e.image})}),(0,s.jsx)("span",{children:e.username})]},e.id))]}),(0,s.jsxs)("footer",{className:"flex flex-col gap-2 ",children:[(0,s.jsx)("button",{className:"primary-btn w-full",onClick:()=>{t(n)},children:"Confirmer"}),(0,s.jsx)("button",{className:"secondary-btn w-full",onClick:r,children:"Annuler"})]})]})}},55822:(e,t,r)=>{"use strict";r.d(t,{default:()=>i});var s=r(45512),a=r(99318),l=r(79334);function i({categories:e}){let t=(0,l.usePathname)();return(0,s.jsx)("aside",{className:"hidden md:block w-60 flex-shrink-0 h-full p-4 sticky top-40",children:(0,s.jsxs)("ul",{className:"space-y-2  flex flex-col gap-2 w-full",children:[(0,s.jsx)("li",{className:"w-full",children:(0,s.jsx)(a.Link,{className:"primary-btn w-full",href:"/events/new",children:"Creer un \xe9v\xe9nement"})}),(0,s.jsx)("li",{className:"w-full",children:(0,s.jsx)(a.Link,{href:"/events",className:`block w-full hover:scale-[1.01] transition-transform ease-in-out border ${"/events"===t?"border-light-yellow":"border-dark-cards"} p-2 bg-card border-2 rounded-lg shadow-xl`,children:"Toutes les cat\xe9gories"})}),e.map(e=>(0,s.jsx)("li",{className:"w-full",children:(0,s.jsx)(a.Link,{href:`/events/${e.title.toLowerCase().replaceAll(" ","-")}`,className:`block w-full hover:scale-[1.01] transition-transform ease-in-out border ${t===`/events/${e.title.toLowerCase().replaceAll(" ","-")}`?"border-light-yellow":"border-black dark:border-dark-cards"} p-2 bg-card border-2 rounded-lg shadow-xl`,children:e.title})},e.id))]})})}},63917:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});var s=r(45512),a=r(5429),l=r(58009);let i=["places"],n=({onAddressChange:e,existingAddress:t})=>{let[r,n]=(0,l.useState)(!1),[o,c]=(0,l.useState)({lat:53.54992,lng:10.00678}),[d,u]=(0,l.useState)(10),m=(0,l.useRef)(null);return(0,l.useEffect)(()=>{t&&(c({lat:t.lat,lng:t.lng}),u(20))},[t]),(0,l.useEffect)(()=>{r||n(!0)},[r]),(0,s.jsx)(a.aJ,{googleMapsApiKey:"AIzaSyCiMsDYapFEot5flJzFKDVYYkdRf1ORFfQ",libraries:i,children:r&&(0,s.jsxs)("div",{children:[(0,s.jsx)(a.jT,{onLoad:e=>{m.current=e},onPlaceChanged:()=>{if(m.current){let t=m.current.getPlace();if(t?.geometry&&t.geometry?.location){let r={url:t.url,lat:t.geometry.location.lat(),lng:t.geometry.location.lng(),formattedAddress:t.formatted_address,vicinity:t.vicinity};c({lat:r.lat,lng:r.lng}),u(20),e(r)}}},children:(0,s.jsx)("input",{placeholder:"Chercher un lieu",className:"newEventInput w-full mb-5",defaultValue:t?.formattedAddress??""})}),(0,s.jsx)("div",{className:"rounded-lg border-2 border-black dark:border-dark-grey/50 overflow-hidden h-[500px] w-full",children:(0,s.jsx)(a.u6,{center:o,zoom:d,mapContainerStyle:{width:"100%",height:"100%"},children:(0,s.jsx)(a.pH,{position:o})})})]})})}},74490:(e,t,r)=>{"use strict";r.d(t,{$w:()=>n,Ug:()=>i,Wo:()=>c,jk:()=>l,q8:()=>d,y4:()=>a});var s=r(16131);let a=s.z.object({email:s.z.string().email({message:"Veuillez utiliser une adresse e-mail valide"})}),l=/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[#@$!%*?&])[A-Za-z\d#@$!%*?&]{8,30}$/,i="8 caract\xe8res, une majuscule, une minuscule, un chiffre et un caract\xe8re sp\xe9cial, ' \" _ - ne sont pas autoris\xe9s",n=s.z.object({password:s.z.string().min(8,{message:"Le mot de passe doit \xeatre de 8 caract\xe8res minimum"}).max(30,{message:"Le mot de passe doit \xeatre de 30 caract\xe8res maximum"}).regex(l,{message:i})});s.z.object({email:s.z.string().email({message:"Veuillez utiliser une adresse e-mail valide"})});let o=s.z.object({url:s.z.string().url(),lat:s.z.number(),lng:s.z.number(),formattedAddress:s.z.string(),vicinity:s.z.string()}),c=s.z.object({categoryId:s.z.string(),title:s.z.string().max(100,{message:"Le titre doit \xeatre de 100 caract\xe8res maximum"}),description:s.z.string().min(30,{message:"Il faut un peu de l'inspiration pour cette description!"}).max(1e3,{message:"La description doit \xeatre de 1000 caract\xe8res maximum"}),eventStart:s.z.date().refine(e=>{let t=new Date;return!isNaN(e.getTime())&&e>=t},{message:"La date doit \xeatre valide et ne peut pas \xeatre dans le pass\xe9"}),eventEnd:s.z.date().nullable().refine(e=>{if(!e)return!0;let t=new Date;return!isNaN(e.getTime())&&e>=t},{message:"La date doit \xeatre valide et ne peut pas \xeatre dans le pass\xe9"}),isPublic:s.z.boolean(),participants:s.z.array(s.z.string()),address:o,image:s.z.instanceof(File)});s.z.string().regex(RegExp("^(sport|education|language|city tours|air libre|autres)$"),{message:"Titre invalide"});let d=s.z.object({username:s.z.string().max(30,"Le nom d'utilisateur doit comporter 30 caract\xe8res ou moins").optional(),image:s.z.union([s.z.instanceof(File).refine(e=>e.size<=2097152,{message:"La taille de l'image doit \xeatre de 2 Mo ou moins"}),s.z.null(),s.z.undefined()]).optional(),description:s.z.string().max(1e3,"La description doit comporter 1000 caract\xe8res ou moins").optional(),oldImage:s.z.string().optional()}),u=s.z.object({id:s.z.string(),email:s.z.string().email().nullable(),username:s.z.string().nullable(),image:s.z.string().nullable(),description:s.z.string().nullable(),_count:s.z.object({Ratings:s.z.number(),EventsCreated:s.z.number()})});s.z.array(u)},35443:(e,t,r)=>{"use strict";r.d(t,{J:()=>i});var s=r(88977);r(98063);var a=r(55630),l=r(56215);let i=async()=>{try{return await (0,a.j)()}catch(e){return console.error(e),[]}};(0,l.D)([i]),(0,s.A)(i,"7f5374c2b59c0ce6d5223a1edc8cea6edc1eb9550f",null)},9890:(e,t,r)=>{"use strict";r.d(t,{V:()=>i});var s=r(79748),a=r(33873),l=r.n(a);async function i(e,t){if(!e)throw Error("No file provided");let r=t.replace(/[^a-zA-Z0-9-_]/g,"_"),a=`${r}_${Date.now()}.jpg`,i=`/uploads/${a}`,n=await e.arrayBuffer(),o=l().join(process.cwd(),"public","uploads",a);try{return await (0,s.writeFile)(o,Buffer.from(n)),{imagePath:i}}catch(e){return console.error("Error saving the image:",e),{imagePath:null}}}},4858:(e,t,r)=>{"use strict";r.d(t,{K:()=>l});var s=r(39290),a=r(2121);let l=async e=>{let t=await (0,s.j2)();if(!t)return console.error("selectAllBasicUserInfos: no session found"),[];try{let r=await (0,a.ZR)();if(!r)return[];if(!e)return r.filter(e=>e.id!==t?.user?.id&&null!==e.username&&null!==e.email&&null!==e.image&&null!==e.description);return r.filter(t=>!!(t.username?.toLowerCase().includes(e.toLowerCase())||t.email?.toLowerCase().includes(e.toLowerCase())))}catch(e){return console.error(e),[]}}},39381:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>i});var s=r(62740),a=r(40962),l=r(11587);async function i({children:e}){let t=await l.A.category.findMany({select:{id:!0,title:!0,_count:{select:{Events:!0}}}});return(0,s.jsxs)("div",{className:"flex mt-10 min-h-screen gap-10 max-w-max w-full mx-auto sm:pl-10 ",children:[(0,s.jsx)("div",{className:"hidden sm:block",children:(0,s.jsx)(a.default,{categories:t})}),(0,s.jsx)("div",{className:"w-full min-h-full md:border-l p-2 ",children:e})]})}r(76301)},40962:(e,t,r)=>{"use strict";r.d(t,{default:()=>s});let s=(0,r(46760).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\Users\\\\User\\\\Documents\\\\Hi world\\\\ADRAR 2024\\\\Fil Rouge\\\\components\\\\ui\\\\CategoryNav.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\User\\Documents\\Hi world\\ADRAR 2024\\Fil Rouge\\components\\ui\\CategoryNav.tsx","default")},55630:(e,t,r)=>{"use strict";r.d(t,{j:()=>a,t:()=>l});var s=r(11587);let a=async()=>{try{return await s.A.category.findMany({orderBy:{title:"asc"}})}catch(e){return console.error(e),[]}},l=async e=>{try{return await s.A.category.findFirst({where:{title:e}})}catch(e){return console.error(e),null}}},2121:(e,t,r)=>{"use strict";r.d(t,{Vg:()=>l,ZR:()=>a});var s=r(11587);let a=async()=>{try{return await s.A.user.findMany({select:{id:!0,email:!0,username:!0,image:!0,description:!0,_count:{select:{Ratings:!0,EventsCreated:!0}}}})}catch(e){return console.error("selectAllUsersService",e),null}},l=async({id:e})=>{if(!e||"string"!=typeof e)return null;try{let t=await s.A.user.findUnique({where:{id:e},select:{id:!0,email:!0,username:!0,image:!0,description:!0,EventsCreated:{select:{id:!0,title:!0,description:!0,eventStart:!0,eventEnd:!0,isPublic:!0,image:!0,createdAt:!0,updatedAt:!0,formattedAddress:!0,conversation:{select:{id:!0}},participants:{select:{userId:!0}},category:{select:{id:!0,title:!0}},UserInvitations:!0,Tasks:!0},orderBy:{eventStart:"asc"}},EventsJoined:{select:{event:{select:{id:!0,title:!0,description:!0,user:{select:{id:!0,username:!0,image:!0}},eventStart:!0,eventEnd:!0,isPublic:!0,image:!0,createdAt:!0,updatedAt:!0,formattedAddress:!0,conversation:{select:{id:!0}},category:{select:{id:!0,title:!0}},_count:{select:{participants:!0}}}}}},Tasks:!0,CommentsReceived:{select:{id:!0,createdAt:!0,updatedAt:!0,content:!0,recipientId:!0,author:{select:{id:!0,username:!0,image:!0}},rating:{select:{score:!0}}}}}});if(!t)return null;return t}catch(e){return console.error("selectUserDataService",e),null}}}};