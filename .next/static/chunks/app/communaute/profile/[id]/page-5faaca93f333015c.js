(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1999],{7208:(e,r,t)=>{Promise.resolve().then(t.bind(t,3524)),Promise.resolve().then(t.bind(t,371)),Promise.resolve().then(t.bind(t,3126)),Promise.resolve().then(t.bind(t,4788))},3524:(e,r,t)=>{"use strict";t.d(r,{default:()=>d});var n=t(5155),a=t(5828);let i=(0,a.createServerReference)("70dc9bf5e192ba2ebb97d79e848f22817060a11407",a.callServer,void 0,a.findSourceMapURL,"makeComment");var o=t(6046),s=t(2115),l=t(814),u=t(7490);let c=(0,s.forwardRef)((e,r)=>{let[t,a]=(0,s.useState)(0),[i,o]=(0,s.useState)(0);return(0,s.useImperativeHandle)(r,()=>({getScore:()=>t})),(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{children:"Donne une ponctuation !"}),(0,n.jsx)("div",{className:"flex gap-2 items-center my-2",children:[1,2,3,4,5].map(e=>(0,n.jsx)(u.In,{type:"star",filled:e<=i,onClick:()=>a(e),onMouseEnter:()=>o(e),onMouseLeave:()=>o(t),fillcolor:"#FCE181"},e))})]})});function d(e){let{recipientId:r}=e,t=(0,s.useRef)(null),a=(0,s.useRef)(null),u=(0,o.useRouter)(),[d,f]=(0,s.useState)(!1),[v,h]=(0,s.useState)(!1),m=async e=>{var n,o;e.preventDefault();let s=null===(n=t.current)||void 0===n?void 0:n.value;try{if(s){f(!0);let e=null===(o=a.current)||void 0===o?void 0:o.getScore();if(!e)throw Error("Score is not defined");let n=await i(s,r,e);n.ok?(l.o.success(n.message),t.current.value="",u.refresh()):l.o.error(n.message),f(!1)}}catch(e){console.error(e),l.o.error("Erreur lors de la cr\xe9ation du commentaire")}},p=()=>{t.current&&(t.current.value=""),h(!v)};return(0,n.jsxs)("div",{children:[(0,n.jsx)("button",{onClick:()=>h(!0),className:"".concat(v?"hidden":"primary-btn mb-2"," "),children:"Laisser un commentaire"}),(0,n.jsxs)("form",{className:"".concat(v?"h-[280px] opacity-100":"h-[0px] opacity-0"," overflow-hidden w-[300px] transition-all duration-300 ease-in-out"),onSubmit:e=>m(e),children:[(0,n.jsx)(c,{ref:a}),(0,n.jsx)("textarea",{ref:t,name:"comment",id:"comment",rows:4,placeholder:"Tapez un commentaire",className:"w-full p-2 border-2 border-black dark:border-dark-grey/50 rounded-lg dark:bg-transparent dark:placeholder:text-dark-greenLight/50"}),(0,n.jsxs)("div",{className:"flex gap-2",children:[(0,n.jsx)("button",{type:"submit",className:"primary-btn w-full",disabled:d,children:"Envoyer"}),(0,n.jsx)("div",{className:"secondary-btn",onClick:()=>p(),children:"Annuler"})]})]})]})}c.displayName="ScoreGiver"},371:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>i});var n=t(5155),a=t(7490);function i(e){return(0,n.jsx)(a.In,{...e})}},5828:(e,r,t)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),function(e,r){for(var t in r)Object.defineProperty(e,t,{enumerable:!0,get:r[t]})}(r,{callServer:function(){return n.callServer},createServerReference:function(){return i},findSourceMapURL:function(){return a.findSourceMapURL}});let n=t(9603),a=t(3355),i=t(4979).createServerReference},4788:(e,r,t)=>{"use strict";t.r(r),t.d(r,{UserAvatar:()=>i});var n=t(5155),a=t(5565);let i=e=>{let{className:r,src:t,onClick:i}=e,o=t&&t.trim()?t:"/images/DefaultUserAvatar1.png";return(0,n.jsx)("div",{className:"".concat(r||"size-12"," ").concat(i?"cursor-pointer":""," relative overflow-hidden rounded-full"),onClick:i,"aria-label":"User avatar",children:(0,n.jsx)(a.default,{width:350,height:350,src:o,className:"rounded-full border border-card object-cover overflow-hidden",alt:"user avatar"})})}},3126:(e,r,t)=>{"use strict";t.r(r),t.d(r,{Link:()=>p,ViewTransitions:()=>d,useTransitionRouter:()=>h});var n=t(5155),a=t(8173),i=t(6046),o=t(2115);function s(){return window.location.hash}function l(){return""}function u(e){return window.addEventListener("hashchange",e),()=>window.removeEventListener("hashchange",e)}let c=(0,o.createContext)(()=>()=>{});function d(e){let{children:r}=e,[t,a]=(0,o.useState)(null);return(0,o.useEffect)(()=>{t&&(t(),a(null))},[t]),!function(){let e=(0,i.usePathname)(),r=(0,o.useRef)(e),[t,n]=(0,o.useState)(null);(0,o.useEffect)(()=>{if(!("startViewTransition"in document))return()=>{};let e=()=>{let e;let r=new Promise(r=>{e=r});n([new Promise(e=>{document.startViewTransition(()=>(e(),r))}),e])};return window.addEventListener("popstate",e),()=>{window.removeEventListener("popstate",e)}},[]),t&&r.current!==e&&(0,o.use)(t[0]);let a=(0,o.useRef)(t);(0,o.useEffect)(()=>{a.current=t},[t]);let c=(0,o.useSyncExternalStore)(u,s,l);(0,o.useEffect)(()=>{r.current=e,a.current&&(a.current[1](),a.current=null)},[c,e])}(),(0,n.jsx)(c.Provider,{value:a,children:r})}function f(){return(f=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e}).apply(this,arguments)}function v(e,r){if(null==e)return{};var t,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)t=i[n],r.indexOf(t)>=0||(a[t]=e[t]);return a}function h(){let e=(0,i.useRouter)(),r=(0,o.use)(c),t=(0,o.useCallback)(function(e){let{onTransitionReady:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!("startViewTransition"in document))return e();{let n=document.startViewTransition(()=>new Promise(t=>{(0,o.startTransition)(()=>{e(),r(()=>t)})}));t&&n.ready.then(t)}},[]),n=(0,o.useCallback)(function(r){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var{onTransitionReady:a}=n,i=v(n,["onTransitionReady"]);t(()=>e.push(r,i),{onTransitionReady:a})},[t,e]),a=(0,o.useCallback)(function(r){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var{onTransitionReady:a}=n,i=v(n,["onTransitionReady"]);t(()=>e.replace(r,i),{onTransitionReady:a})},[t,e]);return(0,o.useMemo)(()=>f({},e,{push:n,replace:a}),[n,a,e])}function m(){return(m=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e}).apply(this,arguments)}function p(e){let r=h(),{href:t,as:i,replace:s,scroll:l}=e,u=(0,o.useCallback)(n=>{e.onClick&&e.onClick(n),"startViewTransition"in document&&!function(e){let{nodeName:r}=e.currentTarget;return!!("A"===r.toUpperCase()&&function(e){let r=e.currentTarget.getAttribute("target");return r&&"_self"!==r||e.metaKey||e.ctrlKey||e.shiftKey||e.altKey||e.nativeEvent&&2===e.nativeEvent.which}(e))}(n)&&(n.preventDefault(),(s?r.replace:r.push)(i||t,{scroll:null==l||l}))},[e.onClick,t,i,s,l]);return(0,n.jsx)(a,m({},e,{onClick:u}))}}},e=>{var r=r=>e(e.s=r);e.O(0,[7261,8173,815,5565,814,8441,1517,7358],()=>r(7208)),_N_E=e.O()}]);
//# sourceMappingURL=page-5faaca93f333015c.js.map